<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêù ATC Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0a0a0f; color: #e0e0e0; font-family: 'Segoe UI', system-ui, sans-serif; padding: 12px; min-height: 100vh; }
  .auth-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 90vh; }
  .auth-screen h1 { color: #ffd700; margin-bottom: 20px; }
  .auth-screen input { background: #14141f; border: 1px solid #333; color: #fff; padding: 12px 20px; border-radius: 8px; font-size: 16px; width: 250px; text-align: center; }
  .auth-screen input:focus { outline: none; border-color: #ffd700; }
  .auth-screen .error { color: #ff5252; margin-top: 10px; font-size: 14px; }
  .auth-screen .hint { color: #666; margin-top: 20px; font-size: 12px; }
  .hidden { display: none !important; }
  .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 8px; }
  .header h1 { font-size: 1.4em; color: #ffd700; }
  .header .meta { font-size: 0.8em; color: #888; }
  .header .refresh { background: #222; border: 1px solid #444; color: #ccc; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8em; }
  .header .refresh:hover { background: #333; }
  .header .logout { background: #331111; border: 1px solid #552222; color: #ff8888; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8em; margin-left: 8px; }
  .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px; margin-bottom: 16px; }
  .card { background: #14141f; border: 1px solid #222; border-radius: 8px; padding: 12px; text-align: center; }
  .card .label { font-size: 0.7em; color: #888; text-transform: uppercase; letter-spacing: 1px; }
  .card .value { font-size: 1.5em; font-weight: bold; margin-top: 4px; }
  .card .sub { font-size: 0.75em; color: #888; margin-top: 2px; }
  .green { color: #00e676; }
  .red { color: #ff5252; }
  .gold { color: #ffd700; }
  .blue { color: #448aff; }
  .grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; }
  @media (max-width: 700px) { .grid2 { grid-template-columns: 1fr; } }
  .panel { background: #14141f; border: 1px solid #222; border-radius: 8px; padding: 12px; }
  .panel h3 { font-size: 0.9em; color: #ffd700; margin-bottom: 8px; border-bottom: 1px solid #222; padding-bottom: 4px; }
  .chart-container { position: relative; height: 200px; }
  table { width: 100%; border-collapse: collapse; font-size: 0.75em; }
  th { text-align: left; color: #888; font-weight: 500; padding: 4px 6px; border-bottom: 1px solid #222; }
  td { padding: 4px 6px; border-bottom: 1px solid #1a1a2e; }
  tr:hover td { background: #1a1a2e; }
  .pos-table { max-height: 500px; overflow-y: auto; }
  .countdown { font-size: 0.7em; padding: 2px 6px; border-radius: 3px; display: inline-block; }
  .countdown.soon { background: #ff525233; color: #ff8a80; }
  .countdown.today { background: #ffd70033; color: #ffd740; }
  .countdown.later { background: #448aff22; color: #82b1ff; }
  .loading { text-align: center; padding: 40px; color: #888; }
</style>
</head>
<body>
<div id="authScreen" class="auth-screen">
  <h1>üêù ATC Dashboard</h1>
  <input type="password" id="passInput" placeholder="Enter password" onkeypress="if(event.key==='Enter')checkPass()">
  <div id="authError" class="error hidden">Wrong password</div>
  <div class="hint">üîí Protected</div>
</div>
<div id="dashboard" class="hidden">
  <div class="header">
    <h1>üêù ATC Dashboard</h1>
    <div class="meta" id="lastUpdate">Loading...</div>
    <div>
      <button class="refresh" onclick="loadData()">üîÑ Refresh</button>
      <button class="logout" onclick="logout()">üö™ Logout</button>
    </div>
  </div>
  <div class="cards" id="cards"><div class="loading">Loading...</div></div>
  <div class="grid2">
    <div class="panel">
      <h3>ü•ß Category Allocation</h3>
      <div class="chart-container"><canvas id="categoryChart"></canvas></div>
    </div>
    <div class="panel">
      <h3>üìä Win/Loss</h3>
      <div class="chart-container"><canvas id="winLossChart"></canvas></div>
    </div>
  </div>
  <div class="panel" style="margin-bottom: 16px;">
    <h3>üìä Active Positions ‚Äî sorted by resolution time</h3>
    <div class="pos-table">
      <table><thead><tr><th>‚è∞ Resolution</th><th>Market</th><th>Outcome</th><th>Prob</th><th>Value</th><th>P&L</th></tr></thead><tbody id="posBody"></tbody></table>
    </div>
  </div>
</div>
<script>
const a0_0x4561fc=a0_0x449c;(function(_0x1d4380,_0x3a196b){const _0x5015f6=a0_0x449c,_0x17e326=_0x1d4380();while(!![]){try{const _0x521c65=parseInt(_0x5015f6(0x1d7,'\x23\x5a\x4f\x26'))/0x1*(parseInt(_0x5015f6(0x1f9,'\x6a\x35\x29\x4a'))/0x2)+-parseInt(_0x5015f6(0x1db,'\x40\x76\x21\x78'))/0x3*(parseInt(_0x5015f6(0x205,'\x44\x40\x39\x39'))/0x4)+-parseInt(_0x5015f6(0x1d8,'\x23\x5a\x4f\x26'))/0x5+-parseInt(_0x5015f6(0x1f7,'\x25\x32\x52\x6e'))/0x6+parseInt(_0x5015f6(0x1d9,'\x7a\x21\x78\x49'))/0x7+-parseInt(_0x5015f6(0x1e6,'\x70\x55\x79\x4b'))/0x8*(parseInt(_0x5015f6(0x1fe,'\x58\x70\x4f\x2a'))/0x9)+parseInt(_0x5015f6(0x203,'\x30\x38\x39\x39'))/0xa*(parseInt(_0x5015f6(0x1dd,'\x47\x30\x66\x21'))/0xb);if(_0x521c65===_0x3a196b)break;else _0x17e326['push'](_0x17e326['shift']());}catch(_0x354e91){_0x17e326['push'](_0x17e326['shift']());}}}(a0_0x246c,0x6bfe1));const a0_0x197890=a0_0x4561fc(0x20c,'\x28\x5b\x54\x21');async function a0_0x44f124(_0x2b7d97){const _0x49d7c4=a0_0x4561fc,_0x3eba7e={'\x44\x73\x59\x64\x63':_0x49d7c4(0x1e3,'\x25\x32\x52\x6e')},_0x4a368c=await crypto['\x73\x75\x62\x74\x6c\x65']['\x64\x69\x67\x65\x73\x74'](_0x3eba7e['\x44\x73\x59\x64\x63'],new TextEncoder()[_0x49d7c4(0x1e5,'\x70\x57\x56\x56')](_0x2b7d97));return Array[_0x49d7c4(0x1ed,'\x68\x43\x28\x4a')](new Uint8Array(_0x4a368c))[_0x49d7c4(0x1ff,'\x72\x51\x6b\x55')](_0x4faabb=>_0x4faabb['\x74\x6f\x53\x74\x72\x69\x6e\x67'](0x10)[_0x49d7c4(0x202,'\x47\x30\x66\x21')](0x2,'\x30'))[_0x49d7c4(0x1fd,'\x65\x25\x41\x47')]('');}function a0_0x449c(_0x2cec71,_0x41cc7b){_0x2cec71=_0x2cec71-0x1d3;const _0x246c67=a0_0x246c();let _0x449c56=_0x246c67[_0x2cec71];if(a0_0x449c['\x61\x78\x6e\x79\x72\x6d']===undefined){var _0x1ac38e=function(_0x1095f4){const _0x2e8df3='\x61\x62\x63\x64\x65\x66\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x53\x54\x55\x56\x57\x58\x59\x5a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2b\x2f\x3d';let _0x155dfa='',_0x48d67f='';for(let _0x518b7b=0x0,_0x199e81,_0x1668d7,_0x4d7269=0x0;_0x1668d7=_0x1095f4['\x63\x68\x61\x72\x41\x74'](_0x4d7269++);~_0x1668d7&&(_0x199e81=_0x518b7b%0x4?_0x199e81*0x40+_0x1668d7:_0x1668d7,_0x518b7b++%0x4)?_0x155dfa+=String['\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65'](0xff&_0x199e81>>(-0x2*_0x518b7b&0x6)):0x0){_0x1668d7=_0x2e8df3['\x69\x6e\x64\x65\x78\x4f\x66'](_0x1668d7);}for(let _0x49f498=0x0,_0x531040=_0x155dfa['\x6c\x65\x6e\x67\x74\x68'];_0x49f498<_0x531040;_0x49f498++){_0x48d67f+='\x25'+('\x30\x30'+_0x155dfa['\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74'](_0x49f498)['\x74\x6f\x53\x74\x72\x69\x6e\x67'](0x10))['\x73\x6c\x69\x63\x65'](-0x2);}return decodeURIComponent(_0x48d67f);};const _0x2bc81f=function(_0x37d9d1,_0x2971cb){let _0x3b81d6=[],_0x3f9326=0x0,_0x5eecdc,_0x509938='';_0x37d9d1=_0x1ac38e(_0x37d9d1);let _0x3a9690;for(_0x3a9690=0x0;_0x3a9690<0x100;_0x3a9690++){_0x3b81d6[_0x3a9690]=_0x3a9690;}for(_0x3a9690=0x0;_0x3a9690<0x100;_0x3a9690++){_0x3f9326=(_0x3f9326+_0x3b81d6[_0x3a9690]+_0x2971cb['\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74'](_0x3a9690%_0x2971cb['\x6c\x65\x6e\x67\x74\x68']))%0x100,_0x5eecdc=_0x3b81d6[_0x3a9690],_0x3b81d6[_0x3a9690]=_0x3b81d6[_0x3f9326],_0x3b81d6[_0x3f9326]=_0x5eecdc;}_0x3a9690=0x0,_0x3f9326=0x0;for(let _0x380f1e=0x0;_0x380f1e<_0x37d9d1['\x6c\x65\x6e\x67\x74\x68'];_0x380f1e++){_0x3a9690=(_0x3a9690+0x1)%0x100,_0x3f9326=(_0x3f9326+_0x3b81d6[_0x3a9690])%0x100,_0x5eecdc=_0x3b81d6[_0x3a9690],_0x3b81d6[_0x3a9690]=_0x3b81d6[_0x3f9326],_0x3b81d6[_0x3f9326]=_0x5eecdc,_0x509938+=String['\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65'](_0x37d9d1['\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74'](_0x380f1e)^_0x3b81d6[(_0x3b81d6[_0x3a9690]+_0x3b81d6[_0x3f9326])%0x100]);}return _0x509938;};a0_0x449c['\x4c\x6d\x4f\x4f\x51\x78']=_0x2bc81f,a0_0x449c['\x6e\x62\x73\x54\x43\x6f']={},a0_0x449c['\x61\x78\x6e\x79\x72\x6d']=!![];}const _0x4ee105=_0x246c67[0x0],_0xf195cf=_0x2cec71+_0x4ee105,_0x1139fb=a0_0x449c['\x6e\x62\x73\x54\x43\x6f'][_0xf195cf];return!_0x1139fb?(a0_0x449c['\x71\x57\x6c\x68\x57\x6c']===undefined&&(a0_0x449c['\x71\x57\x6c\x68\x57\x6c']=!![]),_0x449c56=a0_0x449c['\x4c\x6d\x4f\x4f\x51\x78'](_0x449c56,_0x41cc7b),a0_0x449c['\x6e\x62\x73\x54\x43\x6f'][_0xf195cf]=_0x449c56):_0x449c56=_0x1139fb,_0x449c56;}async function a0_0x172af2(){const _0x4961d6=a0_0x4561fc,_0xef74eb={'\x6d\x51\x51\x70\x44':_0x4961d6(0x1d3,'\x25\x50\x23\x57'),'\x57\x41\x66\x7a\x48':function(_0x36ae84,_0x52ec08){return _0x36ae84(_0x52ec08);},'\x62\x54\x6e\x4e\x52':function(_0x4fbc99,_0x5f0061){return _0x4fbc99===_0x5f0061;},'\x72\x6a\x55\x48\x6d':_0x4961d6(0x1f8,'\x23\x34\x30\x59'),'\x61\x4a\x4a\x7a\x4b':function(_0x5e8d61){return _0x5e8d61();},'\x5a\x59\x50\x6f\x66':_0x4961d6(0x1d5,'\x76\x59\x79\x5d'),'\x75\x50\x5a\x6f\x70':_0x4961d6(0x204,'\x28\x5b\x54\x21')},_0x339a55=document[_0x4961d6(0x1da,'\x47\x55\x25\x53')](_0xef74eb[_0x4961d6(0x1f1,'\x7a\x21\x78\x49')])[_0x4961d6(0x1fb,'\x4a\x77\x72\x35')],_0x39332b=await _0xef74eb[_0x4961d6(0x1de,'\x44\x40\x39\x39')](a0_0x44f124,_0x339a55);_0xef74eb[_0x4961d6(0x1df,'\x70\x55\x79\x4b')](_0x39332b,a0_0x197890)?(sessionStorage[_0x4961d6(0x1e1,'\x68\x43\x28\x4a')](_0xef74eb[_0x4961d6(0x1e2,'\x24\x29\x41\x48')],'\x31'),_0xef74eb['\x61\x4a\x4a\x7a\x4b'](a0_0x3b9787)):(document[_0x4961d6(0x1fa,'\x70\x57\x56\x56')](_0xef74eb['\x5a\x59\x50\x6f\x66'])[_0x4961d6(0x208,'\x62\x65\x48\x33')]['\x72\x65\x6d\x6f\x76\x65'](_0xef74eb[_0x4961d6(0x1ec,'\x68\x43\x28\x4a')]),document[_0x4961d6(0x206,'\x56\x53\x28\x73')](_0xef74eb[_0x4961d6(0x1f4,'\x69\x79\x6c\x7a')])[_0x4961d6(0x200,'\x47\x30\x66\x21')]='');}function a0_0x6907db(){const _0x27a4d7=a0_0x4561fc,_0xcfd445={'\x52\x44\x4a\x63\x45':_0x27a4d7(0x1e9,'\x33\x70\x48\x45')};sessionStorage[_0x27a4d7(0x207,'\x7a\x21\x78\x49')](_0xcfd445[_0x27a4d7(0x1e4,'\x76\x59\x79\x5d')]),location[_0x27a4d7(0x20b,'\x72\x45\x67\x66')]();}function a0_0x3b9787(){const _0x21f491=a0_0x4561fc,_0x169743={'\x70\x52\x79\x43\x55':_0x21f491(0x209,'\x4a\x77\x72\x35'),'\x62\x61\x47\x79\x51':_0x21f491(0x1dc,'\x44\x40\x39\x39'),'\x66\x79\x4c\x6e\x54':_0x21f491(0x1ef,'\x57\x2a\x26\x75'),'\x64\x4d\x56\x57\x6d':function(_0x3b2414){return _0x3b2414();}};document[_0x21f491(0x1ee,'\x28\x5b\x54\x21')](_0x169743['\x70\x52\x79\x43\x55'])[_0x21f491(0x1f5,'\x5b\x57\x65\x6e')][_0x21f491(0x1e0,'\x63\x45\x6a\x37')](_0x169743[_0x21f491(0x1ea,'\x25\x50\x23\x57')]),document[_0x21f491(0x1d6,'\x24\x29\x41\x48')](_0x169743['\x66\x79\x4c\x6e\x54'])[_0x21f491(0x1f3,'\x21\x28\x51\x45')][_0x21f491(0x1d4,'\x29\x23\x48\x4d')](_0x169743['\x62\x61\x47\x79\x51']),_0x169743[_0x21f491(0x1f6,'\x66\x71\x56\x25')](loadData);}function a0_0x246c(){const _0x6f7611=['\x42\x43\x6b\x65\x63\x65\x64\x63\x4f\x49\x64\x64\x55\x4e\x6e\x31\x57\x4f\x69','\x70\x38\x6f\x66\x72\x62\x5a\x64\x48\x78\x6c\x63\x56\x75\x44\x39\x57\x4f\x37\x64\x52\x43\x6b\x62\x57\x35\x57','\x57\x37\x4a\x63\x4f\x75\x46\x63\x4c\x68\x42\x63\x56\x61','\x70\x6d\x6f\x31\x57\x4f\x33\x64\x4a\x48\x37\x63\x52\x53\x6f\x7a\x57\x35\x38\x6a\x57\x51\x46\x63\x47\x30\x38\x31\x7a\x6d\x6b\x35\x57\x34\x76\x68\x57\x36\x6c\x64\x54\x4b\x54\x52\x57\x51\x4c\x2f\x71\x43\x6f\x39\x57\x4f\x4b\x54\x6a\x71\x70\x64\x54\x6d\x6b\x42\x44\x4a\x43\x71\x57\x52\x4e\x63\x54\x43\x6f\x2f\x43\x67\x47\x30\x57\x36\x76\x43\x57\x37\x62\x6f\x61\x43\x6f\x6c\x57\x51\x79\x47\x62\x67\x68\x64\x4c\x49\x56\x63\x54\x4b\x35\x46\x42\x47\x34\x67\x6c\x30\x43\x45\x6d\x43\x6b\x76\x6f\x57','\x75\x38\x6b\x30\x71\x6d\x6b\x43\x67\x43\x6f\x6e\x46\x31\x52\x64\x48\x71','\x57\x36\x4b\x74\x57\x35\x65\x78\x57\x51\x78\x63\x53\x47','\x57\x37\x47\x38\x6e\x66\x37\x64\x47\x43\x6b\x42\x57\x52\x2f\x63\x48\x53\x6b\x52','\x57\x51\x4e\x64\x51\x4d\x4c\x58\x44\x53\x6b\x51\x64\x6d\x6f\x33\x78\x53\x6f\x76\x57\x52\x71\x54\x45\x6d\x6f\x75','\x6c\x33\x50\x58\x57\x34\x2f\x63\x47\x30\x34\x64\x57\x36\x75\x42\x62\x49\x7a\x58','\x6c\x4e\x31\x2b\x57\x34\x56\x63\x47\x4b\x31\x4a\x57\x35\x43\x65\x63\x49\x6a\x78\x57\x52\x34','\x79\x38\x6f\x61\x72\x32\x70\x63\x56\x53\x6f\x6d\x45\x43\x6b\x35\x6a\x75\x2f\x63\x53\x6d\x6f\x56\x6b\x57','\x69\x61\x64\x64\x52\x4e\x4b\x77\x57\x36\x56\x63\x4b\x38\x6b\x37\x57\x51\x70\x63\x52\x4d\x30\x72\x57\x4f\x2f\x63\x50\x57','\x57\x35\x43\x4b\x57\x34\x47\x53\x57\x34\x42\x63\x49\x72\x65\x75\x57\x34\x5a\x64\x53\x53\x6f\x37','\x74\x43\x6f\x6a\x42\x64\x71\x70\x6c\x61','\x79\x65\x47\x68\x57\x34\x61\x43\x64\x6d\x6b\x31\x44\x57','\x43\x53\x6f\x48\x42\x49\x4f\x49','\x57\x36\x6c\x63\x4b\x47\x37\x64\x49\x43\x6b\x63','\x6f\x38\x6b\x62\x6e\x61','\x6d\x66\x43\x62\x57\x35\x4b\x2f\x57\x36\x42\x64\x52\x71','\x57\x52\x5a\x64\x50\x75\x48\x38\x44\x57','\x57\x36\x56\x64\x4a\x74\x4e\x63\x4b\x38\x6b\x71\x57\x36\x7a\x34','\x57\x34\x53\x6e\x63\x4c\x78\x64\x47\x71','\x6d\x68\x44\x75\x46\x43\x6b\x4c\x6b\x47','\x57\x52\x4a\x63\x4f\x47\x46\x64\x53\x38\x6b\x72\x57\x51\x37\x64\x56\x57','\x57\x50\x52\x64\x55\x43\x6f\x30\x77\x6d\x6b\x72\x57\x52\x64\x64\x4e\x74\x4a\x64\x54\x5a\x69\x4c\x78\x38\x6f\x43','\x43\x47\x6e\x66\x57\x51\x76\x36\x57\x52\x56\x63\x53\x66\x78\x63\x56\x71\x44\x32\x6d\x57\x4f','\x63\x32\x42\x63\x4a\x67\x65\x6a\x57\x34\x5a\x63\x4e\x53\x6b\x65','\x71\x43\x6b\x30\x44\x6d\x6b\x77\x61\x71','\x57\x4f\x33\x63\x53\x63\x5a\x64\x49\x38\x6f\x41\x57\x50\x57\x44\x57\x50\x4f','\x6e\x4d\x69\x56\x57\x37\x38\x37','\x6a\x75\x61\x41\x57\x37\x30','\x42\x38\x6b\x50\x57\x34\x2f\x64\x52\x4b\x52\x64\x53\x38\x6b\x6d\x57\x4f\x47\x65\x57\x52\x42\x64\x54\x61\x66\x65\x79\x47','\x68\x58\x54\x63\x57\x37\x76\x68\x57\x4f\x2f\x63\x51\x57\x38\x34','\x57\x4f\x52\x64\x52\x73\x4a\x64\x56\x38\x6f\x70\x57\x50\x71\x4c','\x70\x43\x6b\x4d\x6c\x49\x64\x64\x49\x61','\x57\x37\x6c\x63\x49\x75\x5a\x63\x56\x71\x74\x64\x50\x4c\x4e\x64\x54\x64\x50\x4b\x57\x4f\x69','\x45\x53\x6f\x38\x57\x35\x2f\x63\x54\x53\x6f\x66\x57\x37\x5a\x63\x4c\x6d\x6f\x58\x57\x52\x4f','\x57\x36\x6d\x7a\x6b\x47\x33\x63\x4a\x57','\x57\x52\x64\x63\x47\x53\x6f\x6e\x71\x6d\x6f\x34\x57\x51\x43\x6c\x57\x36\x56\x63\x4f\x71','\x62\x75\x64\x64\x54\x6d\x6b\x67\x57\x52\x69','\x57\x4f\x52\x63\x54\x65\x68\x63\x4a\x43\x6b\x76\x57\x36\x53\x37\x57\x52\x42\x64\x4d\x43\x6b\x6d\x57\x50\x75\x51','\x78\x38\x6f\x70\x57\x35\x6c\x64\x52\x43\x6b\x4b\x69\x6d\x6f\x48\x57\x52\x38','\x62\x47\x75\x57\x73\x53\x6f\x6d\x76\x4b\x4b','\x6d\x4e\x58\x64\x76\x38\x6b\x54\x6b\x53\x6b\x36\x6c\x78\x2f\x63\x4f\x6d\x6b\x35\x62\x6d\x6f\x48\x57\x51\x57','\x45\x53\x6b\x71\x65\x66\x33\x63\x4c\x61','\x66\x53\x6f\x4c\x57\x36\x68\x64\x4f\x75\x52\x64\x52\x5a\x57\x36\x57\x51\x58\x50\x57\x4f\x34\x6a','\x57\x35\x61\x4b\x65\x38\x6f\x4a','\x77\x30\x68\x63\x55\x74\x4e\x64\x4a\x4b\x46\x64\x51\x38\x6f\x59\x57\x35\x57\x52\x57\x34\x2f\x63\x4e\x61','\x57\x37\x30\x55\x6b\x47','\x69\x58\x57\x2f\x57\x34\x61\x62','\x63\x72\x42\x64\x55\x75\x6c\x63\x47\x58\x46\x64\x54\x61','\x6a\x72\x57\x33\x57\x36\x79\x71\x69\x53\x6b\x75\x7a\x57','\x57\x51\x44\x4b\x7a\x66\x31\x65\x57\x50\x33\x63\x4e\x57\x42\x63\x48\x64\x68\x64\x4c\x48\x2f\x63\x53\x71','\x79\x6d\x6b\x4c\x57\x35\x2f\x64\x4a\x30\x70\x64\x55\x61','\x65\x38\x6b\x79\x77\x48\x6d\x57\x69\x76\x4b\x6d','\x57\x51\x74\x64\x4d\x47\x68\x64\x4a\x76\x56\x64\x4d\x4b\x68\x64\x54\x5a\x44\x41\x57\x50\x50\x62\x61\x58\x53','\x69\x53\x6b\x73\x65\x4a\x2f\x64\x55\x53\x6b\x44\x61\x43\x6b\x76\x65\x4e\x75','\x65\x53\x6b\x57\x65\x57\x37\x64\x4f\x5a\x44\x64\x71\x38\x6b\x77'];a0_0x246c=function(){return _0x6f7611;};return a0_0x246c();}if(sessionStorage[a0_0x4561fc(0x201,'\x58\x70\x4f\x2a')]('\x61\x74\x63\x5f\x61\x75\x74\x68')==='\x31')a0_0x3b9787();
const checkPass = a0_0x172af2;
const logout = a0_0x6907db;

const WALLET='0xEE477AE132dc9b21e8f6C976E24fe9Dd9b49AD74';
const TOTAL_DEPOSITED=183.32;
const USDC_E='0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174';
let categoryChart,winLossChart;
function formatCountdown(e){if(!e)return{text:'?',cls:'later'};const n=Date.now(),d=new Date(e).getTime()-n;if(d<=0)return{text:'‚è≥ RESOLVING',cls:'soon'};const h=d/3600000;if(h<1)return{text:`${Math.floor(d/60000)}m`,cls:'soon'};if(h<6)return{text:`${h.toFixed(1)}h`,cls:'soon'};if(h<24)return{text:`${h.toFixed(0)}h`,cls:'today'};return{text:`${Math.floor(h/24)}d`,cls:'later'};}
function formatTime(e){if(!e)return'';return new Date(e).toLocaleString('pl-PL',{timeZone:'Europe/Warsaw',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});}
function pnlColor(v){return v>=0?'green':'red';}
function pnlSign(v){return v>=0?`+$${v.toFixed(2)}`:`-$${Math.abs(v).toFixed(2)}`;}
async function getUSDCBalance(){try{const r=await fetch('https://polygon-bor-rpc.publicnode.com',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({jsonrpc:'2.0',method:'eth_call',params:[{to:USDC_E,data:'0x70a08231000000000000000000000000'+WALLET.slice(2).toLowerCase()},'latest'],id:1})});const{result}=await r.json();return parseInt(result,16)/1e6;}catch(e){return 0;}}
async function loadData(){try{document.getElementById('cards').innerHTML='<div class="loading">Loading...</div>';const[posResp,cash]=await Promise.all([fetch(`https://data-api.polymarket.com/positions?user=${WALLET}&sizeThreshold=0`),getUSDCBalance()]);const positions=await posResp.json();let totalVal=0,totalCost=0,winners=0,losers=0;const categories={};for(const p of positions){const val=parseFloat(p.currentValue||0);const cost=parseFloat(p.initialValue||0);const pnl=parseFloat(p.cashPnl||0);totalVal+=val;totalCost+=cost;if(pnl>0.01)winners++;else if(pnl<-0.01)losers++;const t=(p.title||'').toLowerCase();let cat='Other';if(t.includes('bitcoin')||t.includes('btc'))cat='BTC';else if(t.includes('ethereum')||t.includes('eth'))cat='ETH';else if(t.includes('xrp'))cat='XRP';else if(t.includes('solana')||t.includes('sol'))cat='SOL';else if(t.includes('dota')||t.includes('counter-strike'))cat='Esport';else if(t.match(/vs\.|thunder|spread|nuggets/))cat='Sport';else if(t.match(/temperature|weather/))cat='Weather';else if(t.match(/bank of|ecb|bartlett/))cat='Politics';if(!categories[cat])categories[cat]={value:0,count:0};categories[cat].value+=val;categories[cat].count++;}const portfolioValue=totalVal+cash;const realPnl=portfolioValue-TOTAL_DEPOSITED;const pnlPct=(realPnl/TOTAL_DEPOSITED*100).toFixed(1);document.getElementById('cards').innerHTML=`<div class="card"><div class="label">Portfolio</div><div class="value gold">$${portfolioValue.toFixed(2)}</div><div class="sub">deposited: $${TOTAL_DEPOSITED}</div></div><div class="card"><div class="label">Cash</div><div class="value blue">$${cash.toFixed(2)}</div><div class="sub">USDC.e</div></div><div class="card"><div class="label">Total P&L</div><div class="value ${pnlColor(realPnl)}">${pnlSign(realPnl)}</div><div class="sub">${pnlPct}%</div></div><div class="card"><div class="label">Positions</div><div class="value">${positions.length}</div><div class="sub">üü¢${winners} üî¥${losers}</div></div><div class="card"><div class="label">Position Value</div><div class="value">$${totalVal.toFixed(2)}</div><div class="sub">cost: $${totalCost.toFixed(2)}</div></div>`;const sorted=[...positions].sort((a,b)=>{if(!a.endDate)return 1;if(!b.endDate)return -1;return new Date(a.endDate)-new Date(b.endDate);});document.getElementById('posBody').innerHTML=sorted.map(p=>{const cd=formatCountdown(p.endDate);const time=formatTime(p.endDate);const val=parseFloat(p.currentValue||0);const pnl=parseFloat(p.cashPnl||0);const prob=parseFloat(p.curPrice||0);return`<tr><td><span class="countdown ${cd.cls}">${cd.text}</span> <span style="color:#666;font-size:0.85em;">${time}</span></td><td style="max-width:250px;overflow:hidden;text-overflow:ellipsis;">${(p.title||'').slice(0,60)}</td><td><b>${p.outcome||''}</b></td><td>${(prob*100).toFixed(0)}%</td><td>$${val.toFixed(2)}</td><td class="${pnlColor(pnl)}">${pnlSign(pnl)}</td></tr>`;}).join('');renderCategoryChart(categories);renderWinLossChart(winners,losers,positions.length-winners-losers);document.getElementById('lastUpdate').textContent=`Updated: ${new Date().toLocaleTimeString('pl-PL',{timeZone:'Europe/Warsaw'})}`;}catch(e){document.getElementById('cards').innerHTML=`<div class="loading" style="color:#ff5252;">Error: ${e.message}</div>`;}}
function renderCategoryChart(cats){const labels=Object.keys(cats);const values=labels.map(k=>cats[k].value);const colors={BTC:'#f7931a',ETH:'#627eea',XRP:'#00aae4',SOL:'#9945ff',Sport:'#ff6b35',Esport:'#e040fb',Weather:'#4fc3f7',Politics:'#ab47bc',Other:'#888'};const ctx=document.getElementById('categoryChart').getContext('2d');if(categoryChart)categoryChart.destroy();categoryChart=new Chart(ctx,{type:'doughnut',data:{labels,datasets:[{data:values,backgroundColor:labels.map(l=>colors[l]||'#888'),borderWidth:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'right',labels:{color:'#ccc',font:{size:10}}}}}});}
function renderWinLossChart(wins,losses,neutral){const ctx=document.getElementById('winLossChart').getContext('2d');if(winLossChart)winLossChart.destroy();winLossChart=new Chart(ctx,{type:'doughnut',data:{labels:['Winning','Losing','Neutral'],datasets:[{data:[wins,losses,neutral],backgroundColor:['#00e676','#ff5252','#888'],borderWidth:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'right',labels:{color:'#ccc',font:{size:10}}}}}});}
setInterval(()=>{if(sessionStorage.getItem('atc_auth')==='1')loadData();},60000);
</script>
</body>
</html>
